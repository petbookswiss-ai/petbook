<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Connexion — PetBook</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<script src="https://cdn.auth0.com/js/auth0-spa-js/2.2/auth0-spa-js.production.js"></script>
<style>
    :root{--brand:#22c55e;--border:#e5e7eb}
    *{box-sizing:border-box} body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:#fff;color:#111}
    .wrap{min-height:100dvh;display:grid;place-items:center;padding:24px}
    .card{width:min(560px,92vw);border:1px solid var(--border);border-radius:14px;padding:22px 20px}
    .title{margin:0 0 6px;font-size:24px}
    .muted{margin:0 0 16px;color:#666}
    .row{display:flex;flex-direction:column;gap:12px}
    .btn{display:inline-flex;justify-content:center;align-items:center;padding:12px 16px;border-radius:10px;border:1px solid var(--border);cursor:pointer;font-weight:600}
    .btn.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .hint{margin-top:10px;color:#666;font-size:14px}
  </style>
</head>
<body>
<main class="wrap">
<section class="card">
<h1 class="title">Connexion</h1>
<p class="muted">Connecte-toi pour accéder à ton compte PetBook.</p>
<div class="row" hidden="" id="actions">
<button class="btn primary" id="login">Se connecter / S’inscrire</button>
<button class="btn" id="google">Continuer avec Google</button>
<p class="hint" id="status">Prêt.</p>
</div>
<div class="row" id="loading">
<p class="muted">Chargement…</p>
</div>
</section>
</main>
<script>
    document.addEventListener("DOMContentLoaded", async () => {
      const BASE = location.origin;
      const auth0 = await createAuth0Client({
        domain: "dev-y6a4ysjvjidhk636.us.auth0.com",
        client_id: "ItQnwH65emGqhsKau7BxDNSt1GASe08D",
        authorizationParams: { redirect_uri: `${BASE}/compte.html` },
        cacheLocation: "localstorage",
        useRefreshTokens: true
      });
      const $actions = document.getElementById("actions");
      const $loading = document.getElementById("loading");
      const $status  = document.getElementById("status");
      try {
        if (await auth0.isAuthenticated()) {
          location.replace(`${BASE}/compte.html`);
          return;
        }
      } catch (_) {}
      $loading.hidden = true; $actions.hidden = false;
      document.getElementById("login").addEventListener("click", async () => {
        $status.textContent = "Redirection vers la connexion…";
        await auth0.loginWithRedirect({ authorizationParams: { redirect_uri: `${BASE}/compte.html` } });
      });
      document.getElementById("google").addEventListener("click", async () => {
        $status.textContent = "Connexion Google…";
        await auth0.loginWithRedirect({ authorizationParams: { redirect_uri: `${BASE}/compte.html`, connection: "google-oauth2" } });
      });
    });
  </script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const BASE = location.origin;
  const auth0 = await createAuth0Client({
    domain: "dev-y6a4ysjvjidhk636.us.auth0.com",
    client_id: "ItQnwH65emGqhsKau7BxDNSt1GASe08D",
    authorizationParams: { redirect_uri: `${BASE}/compte.html` },
    cacheLocation: "localstorage",
    useRefreshTokens: true
  });
  try {
    if (await auth0.isAuthenticated()) {
      location.replace(`${BASE}/compte.html`);
      return;
    }
  } catch {}
  const loginBtn = document.getElementById("btn-login");
  if (loginBtn) loginBtn.addEventListener("click", async () => {
    await auth0.loginWithRedirect({ authorizationParams: { redirect_uri: `${BASE}/compte.html` } });
  });
  const googleBtn = document.getElementById("btn-google");
  if (googleBtn) googleBtn.addEventListener("click", async () => {
    await auth0.loginWithRedirect({
      authorizationParams: { redirect_uri: `${BASE}/compte.html`, connection: "google-oauth2" }
    });
  });
});
</script></body>
</html>
