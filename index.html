<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#22c55e" />
  <title>PetBook ‚Äî Accueil</title>

  <link rel="stylesheet" href="assets/style.css" />
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <link rel="apple-touch-icon" href="images/logo-app.png" />

  <!-- Netlify Identity (auth) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    :root{--brand:#22c55e;--ink:#0f172a;--muted:#64748b;--border:#e5e7eb}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu;color:var(--ink);background:#fff}
    a{text-decoration:none;color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:0 18px}

    /* HEADER */
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:12px;font-weight:900;font-size:26px}
    .brand img{height:80px;width:auto}
    @media(min-width:768px){.brand img{height:110px}}
    .links{display:flex;gap:14px;flex-wrap:wrap;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;border:1px solid var(--border);font-weight:800;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}

    .section{padding:24px 0}

    /* ===== CARROUSEL ===== */
    .bubble-wrap{display:flex;justify-content:center;margin-top:10px}
    .carousel{width:clamp(320px, 94vw, 1200px);aspect-ratio: 32/9;border-radius:30px; overflow:hidden;box-shadow:0 16px 48px rgba(0,0,0,.12);position:relative; background:#000;}
    .carousel-track{display:flex;height:100%;transition:transform .6s ease}
    .slide{min-width:100%;height:100%;position:relative;display:block}
    .slide img{width:100%;height:100%;object-fit:cover;display:block}
    .slide .label{position:absolute;left:50%;bottom:14px;transform:translateX(-50%);display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;background:rgba(0,0,0,.45);color:#fff;font-weight:800;backdrop-filter:saturate(140%) blur(4px);pointer-events:none;white-space:nowrap;}
    .carousel-btn{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border:none;border-radius:999px;background:rgba(0,0,0,.28);color:#fff;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .carousel-btn:hover{background:rgba(0,0,0,.4)}
    .prev{left:10px}.next{right:10px}
    .carousel-dots{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);display:flex;gap:8px}
    .dot{width:9px;height:9px;border-radius:999px;background:rgba(255,255,255,.55);border:1px solid rgba(0,0,0,.2);cursor:pointer}
    .dot.active{background:#fff}

    /* ===== TILES ===== */
    .tiles{display:grid;grid-template-columns:1fr;gap:24px;margin-top:22px}
    @media(min-width:768px){.tiles{grid-template-columns:repeat(3,1fr)}}
    .logo-tile{display:block;text-align:center;transition:transform .2s}
    .logo-tile:hover{transform:translateY(-4px) scale(1.02)}
    .logo-img{width:100%;aspect-ratio:16/12;display:flex;align-items:center;justify-content:center}
    .logo-img img{max-width:92%;max-height:92%;object-fit:contain;display:block}
    .caption{margin-top:8px}
    .caption h2{margin:0 0 6px;font-size:1.15rem}
    .caption p{margin:0;color:var(--muted)}

    /* FOOTER */
    footer{margin-top:44px;border-top:1px solid var(--border);background:#fff}
    .footgrid{display:grid;grid-template-columns:1fr;gap:16px;padding:20px 0;text-align:center}
    @media(min-width:768px){.footgrid{grid-template-columns:repeat(2,1fr);text-align:left}}
    .copy{text-align:center;font-size:.85rem;color:#64748b;padding:10px 0}
    .footer-links{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:6px}
    .footer-links a{color:var(--brand);text-decoration:underline;font-weight:700}
    .hidden{display:none !important}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="images/logo.png" alt="Logo PetBook" />
        PetBook
      </a>
      <nav class="links">
        <!-- üîÅ Vente -> Voir les annonces -->
        <a href="annonces.html">Voir les annonces</a>
        <a href="pet-alert.html">Pet Alert</a>
        <a href="mailto:petbookswiss@gmail.com">Contact</a>
        <a href="ajouter-annonce.html" class="btn primary">Publier</a>

        <!-- Auth UI -->
        <a id="link-account" href="compte.html" class="btn hidden">Mon compte</a>
        <button id="btn-login" class="btn">Connexion</button>
        <button id="btn-logout" class="btn hidden">Se d√©connecter</button>
      </nav>
    </div>
  </header>

  <!-- CARROUSEL -->
  <section class="section">
    <div class="bubble-wrap">
      <div class="carousel" aria-label="Banni√®res principales">
        <button class="carousel-btn prev" aria-label="Image pr√©c√©dente">‚Äπ</button>
        <button class="carousel-btn next" aria-label="Image suivante">‚Ä∫</button>
        <div class="carousel-track" id="track">

          <a class="slide" href="annonces.html#chiens">
            <img src="images/hero1.jpg" alt="Adoption chiens">
            <div class="label">üê∂ Annonces chiens</div>
          </a>

          <a class="slide" href="annonces.html#petits-animaux">
            <img src="images/hero11.jpg" alt="Adoption petits animaux">
            <div class="label">üê∞ Petits animaux</div>
          </a>

          <a class="slide" href="annonces.html#reptiles">
            <img src="images/hero111.jpg" alt="Reptiles, amphibiens & insectes">
            <div class="label">ü¶é Reptiles & Cie</div>
          </a>

          <a class="slide" href="annonces.html#ferme">
            <img src="images/hero1111.jpg" alt="Animaux agricoles & de ferme">
            <div class="label">üêê Animaux de ferme</div>
          </a>

          <a class="slide" href="annonces.html#oiseaux">
            <img src="images/hero11111.jpg" alt="Oiseaux">
            <div class="label">üê¶ Oiseaux</div>
          </a>

          <a class="slide" href="annonces.html#poissons">
            <img src="images/hero111111.jpg" alt="Poissons">
            <div class="label">üê† Poissons</div>
          </a>

        </div>
        <div class="carousel-dots" id="dots" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- TILES PRINCIPALES -->
  <main class="section">
    <div class="container">
      <div class="tiles">
        <a class="logo-tile" href="annonces.html">
          <div class="logo-img"><img src="images/vente.png" alt="Voir les annonces" /></div>
          <div class="caption"><h2>Voir les annonces</h2><p>Parcourir tous les animaux</p></div>
        </a>
        <a class="logo-tile" href="pet-alert.html">
          <div class="logo-img"><img src="images/pet-alert.png" alt="PET ALERT" /></div>
          <div class="caption"><h2>Pet Alert</h2><p>Signalez un animal perdu/trouv√©</p></div>
        </a>
        <a class="logo-tile" href="ajouter-annonce.html">
          <div class="logo-img"><img src="images/Accesoir.png" alt="Publier une annonce" /></div>
          <div class="caption"><h2>Publier</h2><p>Ajoutez votre annonce maintenant</p></div>
        </a>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container footgrid">
      <div>
        <div class="title" style="font-weight:800">PetBook</div>
        <p class="muted">Plateforme suisse pour animaux</p>
      </div>
      <div>
        <div class="title" style="font-weight:800">Contact</div>
        <p class="muted"><a href="mailto:petbookswiss@gmail.com">petbookswiss@gmail.com</a></p>
        <div class="footer-links">
          <!-- ‚úÖ Lien infos l√©gales en bas de page -->
          <a href="infos-legales.html">Infos l√©gales</a>
        </div>
      </div>
    </div>
    <div class="container copy">¬© PetBook ‚Äî Tous droits r√©serv√©s.</div>
  </footer>

  <!-- JS carrousel + auth -->
  <script>
    // ===== CARROUSEL =====
    (function(){
      const track = document.getElementById('track');
      const slides = [...track.children];
      const prev   = document.querySelector('.prev');
      const next   = document.querySelector('.next');
      const dotsWrap = document.getElementById('dots');
      let idx = 0, timer = null, lock = false;

      slides.forEach((_,i)=>{
        const b=document.createElement('button');
        b.className='dot'+(i===0?' active':'');
        b.addEventListener('click',()=>go(i,true));
        dotsWrap.appendChild(b);
      });
      const dots=[...dotsWrap.children];

      function go(n,user){
        if(lock) return; lock=true;
        idx=(n+slides.length)%slides.length;
        track.style.transform='translateX(' + (-idx*100) + '%)';
        dots.forEach((d,i)=>d.classList.toggle('active',i===idx));
        setTimeout(()=>lock=false,620);
        if(user){ restart(); }
      }
      function nextSlide(){ go(idx+1); }
      function prevSlide(){ go(idx-1); }
      function start(){ timer=setInterval(nextSlide, 4500); }
      function stop(){ clearInterval(timer); timer=null; }
      function restart(){ stop(); start(); }

      next.addEventListener('click', nextSlide);
      prev.addEventListener('click', prevSlide);
      const carousel = document.querySelector('.carousel');
      carousel.addEventListener('mouseenter', stop);
      carousel.addEventListener('mouseleave', start);

      // Swipe mobile
      let sx=0; track.addEventListener('touchstart',e=>{sx=e.touches[0].clientX; stop();},{passive:true});
      track.addEventListener('touchend',e=>{
        const dx=e.changedTouches[0].clientX - sx;
        if(Math.abs(dx)>40){ dx<0 ? nextSlide() : prevSlide(); }
        start();
      });

      start();
    })();

    // ===== AUTH NETLIFY IDENTITY =====
    (function(){
      const loginBtn   = document.getElementById('btn-login');
      const logoutBtn  = document.getElementById('btn-logout');
      const accountLnk = document.getElementById('link-account');

      function show(el){ el.classList.remove('hidden'); }
      function hide(el){ el.classList.add('hidden'); }

      if(window.netlifyIdentity){
        loginBtn.addEventListener('click', () => netlifyIdentity.open('login'));
        logoutBtn.addEventListener('click', () => netlifyIdentity.logout());

        function refreshUI(user){
          if(user){
            hide(loginBtn); show(logoutBtn); show(accountLnk);
          }else{
            show(loginBtn); hide(logoutBtn); hide(accountLnk);
          }
        }

        netlifyIdentity.on('init', refreshUI);
        netlifyIdentity.on('login', (user)=>{
          refreshUI(user);
          netlifyIdentity.close();
          // Redirige vers l‚Äôespace membre
          window.location.href = 'compte.html';
        });
        netlifyIdentity.on('logout', ()=>{
          refreshUI(null);
          window.location.href = 'index.html';
        });
        netlifyIdentity.init();
      }
    })();
  </script>
</body>
</html>