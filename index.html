<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#22c55e" />
  <title>PetBook ‚Äî Accueil</title>

  <link rel="stylesheet" href="assets/style.css" />
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <link rel="apple-touch-icon" href="images/logo-app.png" />

  <!-- Netlify Identity (authentification) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    :root{--brand:#22c55e;--ink:#0f172a;--muted:#64748b;--border:#e5e7eb}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu;color:var(--ink);background:#fff}
    a{text-decoration:none;color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:0 18px}

    /* HEADER */
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:12px;font-weight:900;font-size:26px}
    .brand img{height:80px;width:auto}
    @media(min-width:768px){.brand img{height:110px}}
    .links{display:flex;gap:14px;flex-wrap:wrap;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;border:1px solid var(--border);font-weight:800;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}

    .section{padding:24px 0}

    /* ===== CARROUSEL (bulle allong√©e) ===== */
    .bubble-wrap{display:flex;justify-content:center;margin-top:10px}
    .carousel{width:clamp(320px, 94vw, 1200px);aspect-ratio: 32/9;border-radius:30px; overflow:hidden;box-shadow:0 16px 48px rgba(0,0,0,.12);position:relative; background:#000;}
    .carousel-track{display:flex;height:100%;transition:transform .6s ease}
    .slide{min-width:100%;height:100%;position:relative;display:block}
    .slide img{width:100%;height:100%;object-fit:cover;display:block}
    .slide .label{position:absolute;left:50%;bottom:14px;transform:translateX(-50%);display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;background:rgba(0,0,0,.45);color:#fff;font-weight:800;backdrop-filter:saturate(140%) blur(4px);pointer-events:none;white-space:nowrap;}
    .carousel-btn{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border:none;border-radius:999px;background:rgba(0,0,0,.28);color:#fff;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .carousel-btn:hover{background:rgba(0,0,0,.4)}
    .prev{left:10px}.next{right:10px}
    .carousel-dots{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);display:flex;gap:8px}
    .dot{width:9px;height:9px;border-radius:999px;background:rgba(255,255,255,.55);border:1px solid rgba(0,0,0,.2);cursor:pointer}
    .dot.active{background:#fff}

    /* ===== CAT√âGORIES (PNG) ===== */
    .tiles{display:grid;grid-template-columns:1fr;gap:24px;margin-top:22px}
    @media(min-width:768px){.tiles{grid-template-columns:repeat(4,1fr)}}
    .logo-tile{display:block;text-align:center;transition:transform .2s}
    .logo-tile:hover{transform:translateY(-4px) scale(1.02)}
    .logo-img{width:100%;aspect-ratio:16/12;display:flex;align-items:center;justify-content:center}
    .logo-img img{max-width:92%;max-height:92%;object-fit:contain;display:block}
    .caption{margin-top:8px}
    .caption h2{margin:0 0 6px;font-size:1.15rem}
    .caption p{margin:0;color:var(--muted)}

    /* FOOTER */
    footer{margin-top:44px;border-top:1px solid var(--border);background:#fff}
    .footgrid{display:grid;grid-template-columns:1fr;gap:16px;padding:20px 0;text-align:center}
    @media(min-width:768px){.footgrid{grid-template-columns:repeat(2,1fr);text-align:left}}
    .copy{text-align:center;font-size:.85rem;color:#64748b;padding:10px 0}

    /* ===== POPUP BIENVENUE ===== */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:1000;padding:16px;}
    .modal{width:min(720px, 100%);background:#fff;border-radius:20px;box-shadow:0 30px 80px rgba(0,0,0,.25);overflow:hidden;animation:pop .18s ease-out;}
    @keyframes pop{from{transform:scale(.98);opacity:.6}to{transform:scale(1);opacity:1}}
    .modal header{border-bottom:1px solid var(--border);padding:16px 20px}
    .modal header h3{margin:0;font-size:1.25rem}
    .modal .content{padding:18px 20px;line-height:1.6}
    .modal .content p{margin-bottom:12px}
    .modal .actions{display:flex;align-items:center;justify-content:space-between;gap:12px;border-top:1px solid var(--border);padding:12px 16px;background:#f8fafc;flex-wrap:wrap;}
    .modal .left{display:flex;align-items:center;gap:10px}
    .modal input[type="checkbox"]{width:18px;height:18px}
    .modal .right{display:flex;gap:10px}
    .btn.ghost{background:#fff;border-color:var(--border);color:var(--ink)}
    .hidden{display:none !important}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="images/logo.png" alt="Logo PetBook" />
        PetBook
      </a>
      <nav class="links">
        <a href="animals.html">Vente</a>
        <a href="services.html">Prestations</a>
        <a href="pet-alert.html">Pet Alert</a>
        <a href="accessoires.html">Accessoires</a>
        <a href="publish.html" class="btn primary">Publier</a>

        <!-- Auth UI -->
        <a id="link-account" href="compte.html" class="btn hidden">Mon compte</a>
        <button id="btn-login" class="btn">Connexion</button>
        <button id="btn-logout" class="btn hidden">Se d√©connecter</button>
      </nav>
    </div>
  </header>

  <!-- CARROUSEL (6 SLIDES) -->
  <section class="section">
    <div class="bubble-wrap">
      <div class="carousel" aria-label="Banni√®res principales">
        <button class="carousel-btn prev" aria-label="Image pr√©c√©dente">‚Äπ</button>
        <button class="carousel-btn next" aria-label="Image suivante">‚Ä∫</button>
        <div class="carousel-track" id="track">

          <a class="slide" href="adoption-chiens.html">
            <img src="images/hero1.jpg" alt="Adoption chiens">
            <div class="label">üê∂ Adoption chiens</div>
          </a>

          <a class="slide" href="adoption-petits-animaux.html">
            <img src="images/hero11.jpg" alt="Adoption petits animaux">
            <div class="label">üê∞ Adoption petits animaux</div>
          </a>

          <a class="slide" href="adoption-reptiles-amphibiens.html">
            <img src="images/hero111.jpg" alt="Adoption reptiles, amphibiens & insectes">
            <div class="label">ü¶é Adoption reptiles, amphibiens & insectes</div>
          </a>

          <a class="slide" href="adoption-animaux-ferme.html">
            <img src="images/hero1111.jpg" alt="Adoption animaux agricoles & de ferme">
            <div class="label">üêê Adoption animaux agricoles & de ferme</div>
          </a>

          <a class="slide" href="adoption-oiseaux.html">
            <img src="images/hero11111.jpg" alt="Adoption oiseaux">
            <div class="label">üê¶ Adoption oiseaux</div>
          </a>

          <a class="slide" href="adoption-poissons.html">
            <img src="images/hero111111.jpg" alt="Adoption poissons">
            <div class="label">üê† Adoption poissons</div>
          </a>

        </div>
        <div class="carousel-dots" id="dots" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- CAT√âGORIES -->
  <main class="section">
    <div class="container">
      <div class="tiles">
        <a class="logo-tile" href="animals.html">
          <div class="logo-img"><img src="images/vente.png" alt="Vente d‚Äôanimaux" /></div>
          <div class="caption"><h2>Vente d‚Äôanimaux</h2><p>Parcourir les animaux disponibles</p></div>
        </a>
        <a class="logo-tile" href="services.html">
          <div class="logo-img"><img src="images/prestations.png" alt="Prestations pour animaux" /></div>
          <div class="caption"><h2>Prestations</h2><p>Garde, promenade, toilettage‚Ä¶</p></div>
        </a>
        <a class="logo-tile" href="pet-alert.html">
          <div class="logo-img"><img src="images/pet-alert.png" alt="PET ALERT" /></div>
          <div class="caption"><h2>PET ALERT</h2><p>Signalez un animal perdu ou retrouv√©</p></div>
        </a>
        <a class="logo-tile" href="accessoires.html">
          <div class="logo-img"><img src="images/Accesoir.png" alt="Accessoires & mat√©riel" /></div>
          <div class="caption"><h2>Accessoires</h2><p>Cages, liti√®res, paniers, laisses‚Ä¶</p></div>
        </a>
      </div>
    </div>
  </main>

  <!-- POPUP BIENVENUE -->
  <div class="modal-backdrop" id="pb-welcome">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="pb-title">
      <header><h3 id="pb-title">Bienvenue sur PetBook üêæ</h3></header>
      <div class="content">
        <p><strong>Un site de passionn√©s pour les passionn√©s.</strong></p>
        <p>Notre mission&nbsp;: offrir un espace <strong>s√ªr, responsable et bienveillant</strong> pour adopter, vendre et s‚Äôentraider autour des animaux.</p>
        <p>üíö Nous sommes <strong>contre la maltraitance</strong> et les <strong>pratiques malhonn√™tes</strong>. Pour prot√©ger tout le monde, <strong>les vendeurs doivent s‚Äôidentifier</strong> (anti-arnaque), afin que la vente et l‚Äôadoption se d√©roulent dans la confiance, en prot√©geant au mieux <strong>les animaux</strong> et <strong>les humains</strong>.</p>
        <p>Sur PetBook, retrouvez&nbsp;:</p>
        <ul style="margin-left:18px;margin-top:8px">
          <li>üêï des <strong>animaux</strong> √† adopter / vendre</li>
          <li>üõí des <strong>accessoires</strong> et √©quipements</li>
          <li>üö® des <strong>alertes</strong> pour animaux perdus / retrouv√©s</li>
        </ul>
        <p>Bienvenue dans la communaut√© PetBook ‚Äî cr√©√© <em>par des passionn√©s, pour des passionn√©s</em> üê∂üê±</p>
      </div>
      <div class="actions">
        <label class="left"><input type="checkbox" id="pb-never" /><span>‚úÖ Lue, ne plus afficher</span></label>
        <div class="right">
          <button class="btn ghost" id="pb-close">Fermer</button>
          <button class="btn primary" id="pb-accept">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container footgrid">
      <div>
        <div class="title" style="font-weight:800">PetBook</div>
        <p class="muted">Plateforme suisse pour animaux</p>
      </div>
      <div>
        <div class="title" style="font-weight:800">Contact</div>
        <p class="muted"><a href="mailto:petbookswiss@gmail.com">petbookswiss@gmail.com</a></p>
      </div>
    </div>
    <div class="container copy">¬© PetBook ‚Äî Tous droits r√©serv√©s.</div>

    <!-- Chat Milo -->
    <script src="assets/chat-milo.js"></script>

    <!-- JS carrousel + popup + auth -->
    <script>
      // ===== CARROUSEL =====
      (function(){
        const track = document.getElementById('track');
        const slides = [...track.children];
        const prev   = document.querySelector('.prev');
        const next   = document.querySelector('.next');
        const dotsWrap = document.getElementById('dots');
        let idx = 0, timer = null, lock = false;

        slides.forEach((_,i)=>{
          const b=document.createElement('button');
          b.className='dot'+(i===0?' active':'');
          b.addEventListener('click',()=>go(i,true));
          dotsWrap.appendChild(b);
        });
        const dots=[...dotsWrap.children];

        function go(n,user){
          if(lock) return; lock=true;
          idx=(n+slides.length)%slides.length;
          track.style.transform='translateX(' + (-idx*100) + '%)';
          dots.forEach((d,i)=>d.classList.toggle('active',i===idx));
          setTimeout(()=>lock=false,620);
          if(user){ restart(); }
        }
        function nextSlide(){ go(idx+1); }
        function prevSlide(){ go(idx-1); }
        function start(){ timer=setInterval(nextSlide, 4500); }
        function stop(){ clearInterval(timer); timer=null; }
        function restart(){ stop(); start(); }

        next.addEventListener('click', nextSlide);
        prev.addEventListener('click', prevSlide);
        const carousel = document.querySelector('.carousel');
        carousel.addEventListener('mouseenter', stop);
        carousel.addEventListener('mouseleave', start);

        // Swipe mobile
        let sx=0; track.addEventListener('touchstart',e=>{sx=e.touches[0].clientX; stop();},{passive:true});
        track.addEventListener('touchend',e=>{
          const dx=e.changedTouches[0].clientX - sx;
          if(Math.abs(dx)>40){ dx<0 ? nextSlide() : prevSlide(); }
          start();
        });

        start();
      })();

      // ===== POPUP BIENVENUE =====
      (function(){
        const MODAL_KEY = 'pb_welcome_dismissed';
        const backdrop = document.getElementById('pb-welcome');
        const chk = document.getElementById('pb-never');
        const closeBtn = document.getElementById('pb-close');
        const okBtn = document.getElementById('pb-accept');

        function openModal(){ backdrop.style.display='flex'; document.body.style.overflow='hidden'; }
        function hideModal(){ backdrop.style.display='none'; document.body.style.overflow=''; }

        if(localStorage.getItem(MODAL_KEY) !== '1'){
          window.setTimeout(openModal, 250);
        }

        closeBtn.addEventListener('click', hideModal);
        okBtn.addEventListener('click', ()=>{
          if(chk.checked){ localStorage.setItem(MODAL_KEY, '1'); }
          hideModal();
        });

        window.addEventListener('keydown', (e)=>{
          if(backdrop.style.display==='flex' && e.key==='Escape'){ hideModal(); }
        });
        backdrop.addEventListener('click', (e)=>{
          if(e.target === backdrop){ hideModal(); }
        });
      })();

      // ===== AUTH NETLIFY IDENTITY =====
      (function(){
        const loginBtn   = document.getElementById('btn-login');
        const logoutBtn  = document.getElementById('btn-logout');
        const accountLnk = document.getElementById('link-account');

        function show(el){ el.classList.remove('hidden'); }
        function hide(el){ el.classList.add('hidden'); }

        // Ouvre la modale d'auth
        loginBtn.addEventListener('click', () => netlifyIdentity.open('login'));
        logoutBtn.addEventListener('click', () => netlifyIdentity.logout());

        function refreshUI(user){
          if(user){
            hide(loginBtn); show(logoutBtn); show(accountLnk);
          }else{
            show(loginBtn); hide(logoutBtn); hide(accountLnk);
          }
        }

        if(window.netlifyIdentity){
          netlifyIdentity.on('init', refreshUI);
          netlifyIdentity.on('login', (user)=>{
            refreshUI(user);
            netlifyIdentity.close();
            // Redirection optionnelle vers l'espace membre
            window.location.href = '/compte.html';
          });
          netlifyIdentity.on('logout', ()=>{
            refreshUI(null);
            window.location.href = '/';
          });
          netlifyIdentity.init();
        }
      })();
    </script>
  </footer>
</body>
</html>
